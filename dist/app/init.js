!function(){define("views/base",["require","backbone","underscore","underscore.string"],function(require){function getGUID(){return window.guid||(window.guid=0),window.guid++,"uid-"+window.guid}var Backbone=require("backbone"),_=require("underscore"),S=require("underscore.string"),Super=Backbone.View,View=Super.extend({});return View.prototype.initialize=function(options){options=options||{},options.id=options.id||getGUID(),Super.prototype.initialize.call(this,options),this.id||(this.id=options.id),this.options||(this.options=options),this.controls={},this.children={}},View.prototype.mapControls=function(){_.forEach(this.$el.find("[id]"),function(element){var e=$(element);e.attr("name")||e.attr("name",e.attr("id")),this.controls[S.camelize(e.attr("id").replace(this.id+"-",""))]=e},this)},View.prototype.serialize=function(){var serializedData={};return _.forEach(this.$el.find("."+this.getId("field")),function(element){var val,e=$(element);val=e.is(".radio-group")?e.find("input[name="+e.attr("id")+"]:checked").val():e.is("input[type=checkbox]")||e.is("input[type=radio]")?e.is(":checked"):e.val(),serializedData[S.camelize(e.attr("id").replace(this.id+"-",""))]=val},this),serializedData},View.prototype.clearFields=function(){_.forEach(this.$el.find("."+this.getId("field")),function(element){var e=$(element);e.is(".radio-group")?e.find("input[name="+e.attr("id")+"]:checked").removeAttr("checked"):e.is("input[type=checkbox]")||e.is("input[type=radio]")?e.removeAttr("checked"):e.val("")},this)},View.prototype.getId=function(suffix){var id=this.id||this.options.id;return _.isEmpty(suffix)||(id+="-"+suffix),id},View.prototype.isValid=function(){return this.validatorContainer?(this.validatorContainer.data("bootstrapValidator").validate(),this.validatorContainer.data("bootstrapValidator").isValid()):!0},View.prototype.initValidators=function(options,container){this.validatorContainer=container||this.$el,this.validatorContainer.bootstrapValidator(_.extend({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"}},options))},View.prototype.find=function(selector){return this.$el.find(selector)},View.prototype.toId=function(name){return"#"+this.getId(name)},View.prototype.toClass=function(name){return"."+this.getId(name)},View.prototype.findByClass=function(cls){return this.find(this.toClass(cls))},View.prototype.findById=function(id){return this.find(this.toId(id))},View}),define("hbs/handlebars",[],function(){var Handlebars=function(){var __module4__=function(){function SafeString(string){this.string=string}var __exports__;return SafeString.prototype.toString=function(){return""+this.string},__exports__=SafeString}(),__module3__=function(__dependency1__){function escapeChar(chr){return escape[chr]||"&amp;"}function extend(obj,value){for(var key in value)Object.prototype.hasOwnProperty.call(value,key)&&(obj[key]=value[key])}function escapeExpression(string){return string instanceof SafeString?string.toString():string||0===string?(string=""+string,possible.test(string)?string.replace(badChars,escapeChar):string):""}function isEmpty(value){return value||0===value?isArray(value)&&0===value.length?!0:!1:!0}var __exports__={},SafeString=__dependency1__,escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return"function"==typeof value};isFunction(/x/)&&(isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)});var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&"object"==typeof value?"[object Array]"===toString.call(value):!1};return __exports__.isArray=isArray,__exports__.escapeExpression=escapeExpression,__exports__.isEmpty=isEmpty,__exports__}(__module4__),__module5__=function(){function Exception(message,node){var line;node&&node.firstLine&&(line=node.firstLine,message+=" - "+line+":"+node.firstColumn);for(var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];line&&(this.lineNumber=line,this.column=node.firstColumn)}var __exports__,errorProps=["description","fileName","lineNumber","message","name","number","stack"];return Exception.prototype=new Error,__exports__=Exception}(),__module2__=function(__dependency1__,__dependency2__){function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{},this.partials=partials||{},registerDefaultHelpers(this)}function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(arg){if(2===arguments.length)return void 0;throw new Exception("Missing helper: '"+arg+"'")}),instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;return isFunction(context)&&(context=context.call(this)),context===!0?fn(this):context===!1||null==context?inverse(this):isArray(context)?context.length>0?instance.helpers.each(context,options):inverse(this):fn(context)}),instance.registerHelper("each",function(context,options){var data,fn=options.fn,inverse=options.inverse,i=0,ret="";if(isFunction(context)&&(context=context.call(this)),options.data&&(data=createFrame(options.data)),context&&"object"==typeof context)if(isArray(context))for(var j=context.length;j>i;i++)data&&(data.index=i,data.first=0===i,data.last=i===context.length-1),ret+=fn(context[i],{data:data});else for(var key in context)context.hasOwnProperty(key)&&(data&&(data.key=key,data.index=i,data.first=0===i),ret+=fn(context[key],{data:data}),i++);return 0===i&&(ret=inverse(this)),ret}),instance.registerHelper("if",function(conditional,options){return isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})}),instance.registerHelper("with",function(context,options){return isFunction(context)&&(context=context.call(this)),Utils.isEmpty(context)?void 0:options.fn(context)}),instance.registerHelper("log",function(context,options){var level=options.data&&null!=options.data.level?parseInt(options.data.level,10):1;instance.log(level,context)})}function log(level,obj){logger.log(level,obj)}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,VERSION="1.3.0";__exports__.VERSION=VERSION;var COMPILER_REVISION=4;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";__exports__.HandlebarsEnvironment=HandlebarsEnvironment,HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn)throw new Exception("Arg not supported with multiple helpers");Utils.extend(this.helpers,name)}else inverse&&(fn.not=inverse),this.helpers[name]=fn},registerPartial:function(name,str){toString.call(name)===objectType?Utils.extend(this.partials,name):this.partials[name]=str}};var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];"undefined"!=typeof console&&console[method]&&console[method].call(console,obj)}}};__exports__.logger=logger,__exports__.log=log;var createFrame=function(object){var obj={};return Utils.extend(obj,object),obj};return __exports__.createFrame=createFrame,__exports__}(__module3__,__module5__),__module6__=function(__dependency1__,__dependency2__,__dependency3__){function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(currentRevision>compilerRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){if(!env)throw new Exception("No environment passed to template");var invokePartialWrapper=function(partial,name,context,helpers,partials,data){var result=env.VM.invokePartial.apply(this,arguments);if(null!=result)return result;if(env.compile){var options={helpers:helpers,partials:partials,data:data};return partials[name]=env.compile(partial,{data:void 0!==data},env),partials[name](context,options)}throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")},container={escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];return data?programWrapper=program(i,fn,data):programWrapper||(programWrapper=this.programs[i]=program(i,fn)),programWrapper},merge:function(param,common){var ret=param||common;return param&&common&&param!==common&&(ret={},Utils.extend(ret,common),Utils.extend(ret,param)),ret},programWithDepth:env.VM.programWithDepth,noop:env.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var helpers,partials,namespace=options.partial?options:env;options.partial||(helpers=options.helpers,partials=options.partials);var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);return options.partial||env.VM.checkRevision(container.compilerInfo),result}}function programWithDepth(i,fn,data){var args=Array.prototype.slice.call(arguments,3),prog=function(context,options){return options=options||{},fn.apply(this,[context,options.data||data].concat(args))};return prog.program=i,prog.depth=args.length,prog}function program(i,fn,data){var prog=function(context,options){return options=options||{},fn(context,options.data||data)};return prog.program=i,prog.depth=0,prog}function invokePartial(partial,name,context,helpers,partials,data){var options={partial:!0,helpers:helpers,partials:partials,data:data};if(void 0===partial)throw new Exception("The partial "+name+" could not be found");return partial instanceof Function?partial(context,options):void 0}function noop(){return""}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,COMPILER_REVISION=__dependency3__.COMPILER_REVISION,REVISION_CHANGES=__dependency3__.REVISION_CHANGES;return __exports__.checkRevision=checkRevision,__exports__.template=template,__exports__.programWithDepth=programWithDepth,__exports__.program=program,__exports__.invokePartial=invokePartial,__exports__.noop=noop,__exports__}(__module3__,__module5__,__module2__),__module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__,base=__dependency1__,SafeString=__dependency2__,Exception=__dependency3__,Utils=__dependency4__,runtime=__dependency5__,create=function(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=SafeString,hb.Exception=Exception,hb.Utils=Utils,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb},Handlebars=create();return Handlebars.create=create,__exports__=Handlebars}(__module2__,__module4__,__module5__,__module3__,__module6__),__module7__=function(__dependency1__){function LocationInfo(locInfo){locInfo=locInfo||{},this.firstLine=locInfo.first_line,this.firstColumn=locInfo.first_column,this.lastColumn=locInfo.last_column,this.lastLine=locInfo.last_line}var __exports__,Exception=__dependency1__,AST={ProgramNode:function(statements,inverseStrip,inverse,locInfo){var inverseLocationInfo,firstInverseNode;3===arguments.length?(locInfo=inverse,inverse=null):2===arguments.length&&(locInfo=inverseStrip,inverseStrip=null),LocationInfo.call(this,locInfo),this.type="program",this.statements=statements,this.strip={},inverse?(firstInverseNode=inverse[0],firstInverseNode?(inverseLocationInfo={first_line:firstInverseNode.firstLine,last_line:firstInverseNode.lastLine,last_column:firstInverseNode.lastColumn,first_column:firstInverseNode.firstColumn},this.inverse=new AST.ProgramNode(inverse,inverseStrip,inverseLocationInfo)):this.inverse=new AST.ProgramNode(inverse,inverseStrip),this.strip.right=inverseStrip.left):inverseStrip&&(this.strip.left=inverseStrip.right)},MustacheNode:function(rawParams,hash,open,strip,locInfo){if(LocationInfo.call(this,locInfo),this.type="mustache",this.strip=strip,null!=open&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped="{"!==escapeFlag&&"&"!==escapeFlag}else this.escaped=!!open;this.sexpr=rawParams instanceof AST.SexprNode?rawParams:new AST.SexprNode(rawParams,hash),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo),this.type="sexpr",this.hash=hash;var id=this.id=rawParams[0],params=this.params=rawParams.slice(1),eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)},PartialNode:function(partialName,context,strip,locInfo){LocationInfo.call(this,locInfo),this.type="partial",this.partialName=partialName,this.context=context,this.strip=strip},BlockNode:function(mustache,program,inverse,close,locInfo){if(LocationInfo.call(this,locInfo),mustache.sexpr.id.original!==close.path.original)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,this);this.type="block",this.mustache=mustache,this.program=program,this.inverse=inverse,this.strip={left:mustache.strip.left,right:close.strip.right},(program||inverse).strip.left=mustache.strip.right,(inverse||program).strip.right=close.strip.left,inverse&&!program&&(this.isInverse=!0)},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="content",this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo),this.type="hash",this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo),this.type="ID";for(var original="",dig=[],depth=0,i=0,l=parts.length;l>i;i++){var part=parts[i].part;if(original+=(parts[i].separator||"")+part,".."===part||"."===part||"this"===part){if(dig.length>0)throw new Exception("Invalid path: "+original,this);".."===part?depth++:this.isScoped=!0}else dig.push(part)}this.original=original,this.parts=dig,this.string=dig.join("."),this.depth=depth,this.isSimple=1===parts.length&&!this.isScoped&&0===depth,this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo),this.type="PARTIAL_NAME",this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo),this.type="DATA",this.id=id},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="STRING",this.original=this.string=this.stringModeValue=string},IntegerNode:function(integer,locInfo){LocationInfo.call(this,locInfo),this.type="INTEGER",this.original=this.integer=integer,this.stringModeValue=Number(integer)},BooleanNode:function(bool,locInfo){LocationInfo.call(this,locInfo),this.type="BOOLEAN",this.bool=bool,this.stringModeValue="true"===bool},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo),this.type="comment",this.comment=comment}};return __exports__=AST}(__module5__),__module9__=function(){var __exports__,handlebars=function(){function stripFlags(open,close){return{left:"~"===open.charAt(2),right:"~"===close.charAt(0)||"~"===close.charAt(1)}}function Parser(){this.yy={}}var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$){var $0=$$.length-1;switch(yystate){case 1:return new yy.ProgramNode($$[$0-1],this._$);case 2:return new yy.ProgramNode([],this._$);case 3:this.$=new yy.ProgramNode([],$$[$0-1],$$[$0],this._$);break;case 4:this.$=new yy.ProgramNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 5:this.$=new yy.ProgramNode($$[$0-1],$$[$0],[],this._$);break;case 6:this.$=new yy.ProgramNode($$[$0],this._$);break;case 7:this.$=new yy.ProgramNode([],this._$);break;case 8:this.$=new yy.ProgramNode([],this._$);break;case 9:this.$=[$$[$0]];break;case 10:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0],this._$);break;case 12:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0],this._$);break;case 13:this.$=$$[$0];break;case 14:this.$=$$[$0];break;case 15:this.$=new yy.ContentNode($$[$0],this._$);break;case 16:this.$=new yy.CommentNode($$[$0],this._$);break;case 17:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$={path:$$[$0-1],strip:stripFlags($$[$0-2],$$[$0])};break;case 20:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 21:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1],stripFlags($$[$0-3],$$[$0]),this._$);break;case 23:this.$=stripFlags($$[$0-1],$$[$0]);break;case 24:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 25:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 26:this.$=$$[$0];break;case 27:this.$=new yy.StringNode($$[$0],this._$);break;case 28:this.$=new yy.IntegerNode($$[$0],this._$);break;case 29:this.$=new yy.BooleanNode($$[$0],this._$);break;case 30:this.$=$$[$0];break;case 31:$$[$0-1].isHelper=!0,this.$=$$[$0-1];break;case 32:this.$=new yy.HashNode($$[$0],this._$);break;case 33:this.$=[$$[$0-2],$$[$0]];break;case 34:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 35:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 36:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0],this._$));break;case 37:this.$=new yy.DataNode($$[$0],this._$);break;case 38:this.$=new yy.IdNode($$[$0],this._$);break;case 39:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 40:this.$=[{part:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 47:this.$=[$$[$0]];break;case 48:$$[$0-1].push($$[$0])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(str){throw new Error(str)},parse:function(input){function lex(){var token;return token=self.lexer.lex()||1,"number"!=typeof token&&(token=self.symbols_[token]||token),token}var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var symbol,preErrorSymbol,state,action,r,p,len,newState,expected,yyval={};;){if(state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:((null===symbol||"undefined"==typeof symbol)&&(symbol=lex()),action=table[state]&&table[state][symbol]),"undefined"==typeof action||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");errStr=this.lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack),"undefined"!=typeof r)return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);return lines?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var token,match,tempMatch,index,lines;this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length&&(tempMatch=this._input.match(this.rules[rules[i]]),!tempMatch||match&&!(tempMatch[0].length>match[0].length)||(match=tempMatch,index=i,this.options.flex));i++);return match?(lines=match[0].match(/(?:\r\n?|\n).*/g),lines&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token?token:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return"undefined"!=typeof r?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(condition){this.begin(condition)}};return lexer.options={},lexer.performAction=function(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}switch($avoiding_name_collisions){case 0:if("\\\\"===yy_.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===yy_.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),yy_.yytext)return 14;
break;case 1:return 14;case 2:return this.popState(),14;case 3:return strip(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return strip(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),32;case 24:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return yy_.yytext=strip(1,2),40;case 31:return"INVALID";case 32:return 5}},lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],lexer.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},lexer}();return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();return __exports__=handlebars}(),__module8__=function(__dependency1__,__dependency2__){function parse(input){return input.constructor===AST.ProgramNode?input:(parser.yy=AST,parser.parse(input))}var __exports__={},parser=__dependency1__,AST=__dependency2__;return __exports__.parser=parser,__exports__.parse=parse,__exports__}(__module9__,__module7__),__module10__=function(__dependency1__){function Compiler(){}function precompile(input,options,env){if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);options=options||{},"data"in options||(options.data=!0);var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,options,env){function compileInput(){var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,void 0,!0);return env.template(templateSpec)}if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);options=options||{},"data"in options||(options.data=!0);var compiled;return function(context,options){return compiled||(compiled=compileInput()),compiled.call(this,context,options)}}var __exports__={},Exception=__dependency1__;return __exports__.Compiler=Compiler,Compiler.prototype={compiler:Compiler,disassemble:function(){for(var opcode,params,param,opcodes=this.opcodes,out=[],i=0,l=opcodes.length;l>i;i++)if(opcode=opcodes[i],"DECLARE"===opcode.opcode)out.push("DECLARE "+opcode.name+"="+opcode.value);else{params=[];for(var j=0;j<opcode.args.length;j++)param=opcode.args[j],"string"==typeof param&&(param='"'+param.replace("\n","\\n")+'"'),params.push(param);out.push(opcode.opcode+" "+params.join(" "))}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;len>i;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length)return!1;for(var j=0;j<opcode.args.length;j++)if(opcode.args[j]!==otherOpcode.args[j])return!1}if(len=this.children.length,other.children.length!==len)return!1;for(i=0;len>i;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function(program,options){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=options;var knownHelpers=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];return this.accept(program)},accept:function(node){var ret,strip=node.strip||{};return strip.left&&this.opcode("strip"),ret=this[node.type](node),strip.right&&this.opcode("strip"),ret},program:function(program){for(var statements=program.statements,i=0,l=statements.length;l>i;i++)this.accept(statements[i]);return this.isSimple=1===l,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(program){var depth,result=(new this.compiler).compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result;for(var i=0,l=result.depths.list.length;l>i;i++)depth=result.depths.list[i],2>depth||this.addDepth(depth-1);return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;program&&(program=this.compileProgram(program)),inverse&&(inverse=this.compileProgram(inverse));var sexpr=mustache.sexpr,type=this.classifySexpr(sexpr);"helper"===type?this.helperSexpr(sexpr,program,inverse):"simple"===type?(this.simpleSexpr(sexpr),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(sexpr,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(hash){var pair,val,pairs=hash.pairs;this.opcode("pushHash");for(var i=0,l=pairs.length;l>i;i++)pair=pairs[i],val=pair[1],this.options.stringParams?(val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",val.stringModeValue,val.type),"sexpr"===val.type&&this.sexpr(val)):this.accept(val),this.opcode("assignToHash",pair[0]);this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=!0,partial.context?this.ID(partial.context):this.opcode("push","depth0"),this.opcode("invokePartial",partialName.name),this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr),this.opcode(mustache.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=null!=program||null!=inverse;this.opcode("getContext",id.depth),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;"DATA"===id.type?this.DATA(id):id.parts.length?this.ID(id):(this.addDepth(id.depth),this.opcode("getContext",id.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),name=sexpr.id.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);this.opcode("invokeHelper",params.length,name,sexpr.isRoot)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);"simple"===type?this.simpleSexpr(sexpr):"helper"===type?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ID:function(id){this.addDepth(id.depth),this.opcode("getContext",id.depth);var name=id.parts[0];name?this.opcode("lookupOnContext",id.parts[0]):this.opcode("pushContext");for(var i=1,l=id.parts.length;l>i;i++)this.opcode("lookup",id.parts[i])},DATA:function(data){if(this.options.data=!0,data.id.isScoped||data.id.depth)throw new Exception("Scoped data references are not supported: "+data.original,data);this.opcode("lookupData");for(var parts=data.id.parts,i=0,l=parts.length;l>i;i++)this.opcode("lookup",parts[i])},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){0!==depth&&(this.depths[depth]||(this.depths[depth]=!0,this.depths.list.push(depth)))},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper,isEligible=sexpr.eligibleHelper,options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];options.knownHelpers[name]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function(params){for(var param,i=params.length;i--;)param=params[i],this.options.stringParams?(param.depth&&this.addDepth(param.depth),this.opcode("getContext",param.depth||0),this.opcode("pushStringParam",param.stringModeValue,param.type),"sexpr"===param.type&&this.sexpr(param)):this[param.type](param)},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.hash(sexpr.hash):this.opcode("emptyHash"),params}},__exports__.precompile=precompile,__exports__.compile=compile,__exports__}(__module5__),__module11__=function(__dependency1__,__dependency2__){function Literal(value){this.value=value}function JavaScriptCompiler(){}var __exports__,COMPILER_REVISION=__dependency1__.COMPILER_REVISION,REVISION_CHANGES=__dependency1__.REVISION_CHANGES,log=__dependency1__.log,Exception=__dependency2__;JavaScriptCompiler.prototype={nameLookup:function(parent,name){var wrap,ret;return 0===parent.indexOf("depth")&&(wrap=!0),ret=/^[0-9]+$/.test(name)?parent+"["+name+"]":JavaScriptCompiler.isValidJavaScriptVariableName(name)?parent+"."+name:parent+"['"+name+"']",wrap?"("+parent+" && "+ret+")":ret},compilerInfo:function(){var revision=COMPILER_REVISION,versions=REVISION_CHANGES[revision];return"this.compilerInfo = ["+revision+",'"+versions+"'];\n"},appendToBuffer:function(string){return this.environment.isSimple?"return "+string+";":{appendToBuffer:!0,content:string,toString:function(){return"buffer += "+string+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment,this.options=options||{},log("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!context,this.context=context||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(environment,options);var opcode,opcodes=environment.opcodes;this.i=0;for(var l=opcodes.length;this.i<l;this.i++)opcode=opcodes[this.i],"DECLARE"===opcode.opcode?this[opcode.name]=opcode.value:this[opcode.opcode].apply(this,opcode.args),opcode.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Exception("Compile completed with content left on stack");return this.createFunctionContext(asObject)},preamble:function(){var out=[];if(this.isChild)out.push("");else{var namespace=this.namespace,copies="helpers = this.merge(helpers, "+namespace+".helpers);";this.environment.usePartial&&(copies=copies+" partials = this.merge(partials, "+namespace+".partials);"),this.options.data&&(copies+=" data = data || {};"),out.push(copies)}out.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0&&(this.source[1]=this.source[1]+", "+locals.join(", ")),!this.isChild)for(var alias in this.context.aliases)this.context.aliases.hasOwnProperty(alias)&&(this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],i=0,l=this.environment.depths.list.length;l>i;i++)params.push("depth"+this.environment.depths.list[i]);var source=this.mergeSource();if(this.isChild||(source=this.compilerInfo()+source),asObject)return params.push(source),Function.apply(this,params);var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";return log("debug",functionSource+"\n\n"),functionSource},mergeSource:function(){for(var buffer,source="",i=0,len=this.source.length;len>i;i++){var line=this.source[i];line.appendToBuffer?buffer=buffer?buffer+"\n    + "+line.content:line.content:(buffer&&(source+="buffer += "+buffer+";\n  ",buffer=void 0),source+=line+"\n  ")}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params),this.replaceStack(function(current){return params.splice(1,0,current),"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current),this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){this.pendingContent&&(content=this.pendingContent+content),this.stripNext&&(content=content.replace(/^\s+/,"")),this.pendingContent=content},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){this.lastContext!==depth&&(this.lastContext=depth)},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext),this.pushString(type),"sexpr"!==type&&("string"==typeof string?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+hash.contexts.join(",")+"}"),this.push("{"+hash.types.join(",")+"}")),this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){return this.inlineStack.push(expr),expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){this.pushStackLiteral(null!=guid?this.programExpression(guid):null)},invokeHelper:function(paramSize,name,isRoot){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var helper=this.lastHelper=this.setupHelper(paramSize,name,!0),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),lookup="helper = "+helper.name+" || "+nonHelper;helper.paramsInit&&(lookup+=","+helper.paramsInit),this.push("("+lookup+",helper ? helper.call("+helper.callParams+") : helperMissing.call("+helper.helperMissingParams+"))"),isRoot||this.flushInline()},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName=this.lastHelper=this.nameLookup("helpers",name,"helper"),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),nextStack=this.nextStack();helper.paramsInit&&this.pushSource(helper.paramsInit),this.pushSource("if (helper = "+helperName+") { "+nextStack+" = helper.call("+helper.callParams+"); }"),this.pushSource("else { helper = "+nonHelper+"; "+nextStack+" = typeof helper === functionType ? helper.call("+helper.callParams+") : helper; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];this.options.data&&params.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var context,type,value=this.popStack();this.options.stringParams&&(type=this.popStack(),context=this.popStack());var hash=this.hash;context&&hash.contexts.push("'"+key+"': "+context),type&&hash.types.push("'"+key+"': "+type),hash.values.push("'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){for(var child,compiler,children=environment.children,i=0,l=children.length;l>i;i++){child=children[i],compiler=new this.compiler;var index=this.matchExistingProgram(child);null==index?(this.context.programs.push(""),index=this.context.programs.length,child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context),this.context.environments[index]=child):(child.index=index,child.name="program"+index)}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;len>i;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return i}},programExpression:function(guid){if(this.context.aliases.self="this",null==guid)return"self.noop";for(var depth,child=this.environment.children[guid],depths=child.depths.list,programParams=[child.index,child.name,"data"],i=0,l=depths.length;l>i;i++)depth=depths[i],programParams.push(1===depth?"depth0":"depth"+(depth-1));return(0===depths.length?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name),this.pushSource(name+" = "+val+";")},useRegister:function(name){this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),source&&this.source.push(source)},pushStack:function(item){this.flushInline();var stack=this.incrStack();return item&&this.pushSource(stack+" = "+item+";"),this.compileStack.push(stack),stack},replaceStack:function(callback){var stack,createdStack,usedLiteral,prefix="",inline=this.isInline();if(inline){var top=this.popStack(!0);if(top instanceof Literal)stack=top.value,usedLiteral=!0;else{createdStack=!this.stackSlot;var name=createdStack?this.incrStack():this.topStackName();prefix="("+this.push(name)+" = "+top+"),",stack=this.topStack()}}else stack=this.topStack();var item=callback.call(this,stack);return inline?(usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push("("+prefix+item+")")):(/^stack/.test(stack)||(stack=this.nextStack()),this.pushSource(stack+" = ("+prefix+item+");")),stack},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;len>i;i++){var entry=inlineStack[i];entry instanceof Literal?this.compileStack.push(entry):this.pushStack(entry)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;if(!inline){if(!this.stackSlot)throw new Exception("Invalid stack pop");this.stackSlot--}return item},topStack:function(wrapped){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];return!wrapped&&item instanceof Literal?item.value:item},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[],paramsInit=this.setupParams(paramSize,params,missingParams),foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")}},setupOptions:function(paramSize,params){var param,inverse,program,options=[],contexts=[],types=[];options.push("hash:"+this.popStack()),this.options.stringParams&&(options.push("hashTypes:"+this.popStack()),options.push("hashContexts:"+this.popStack())),inverse=this.popStack(),program=this.popStack(),(program||inverse)&&(program||(this.context.aliases.self="this",program="self.noop"),inverse||(this.context.aliases.self="this",inverse="self.noop"),options.push("inverse:"+inverse),options.push("fn:"+program));for(var i=0;paramSize>i;i++)param=this.popStack(),params.push(param),this.options.stringParams&&(types.push(this.popStack()),contexts.push(this.popStack()));return this.options.stringParams&&(options.push("contexts:["+contexts.join(",")+"]"),options.push("types:["+types.join(",")+"]")),this.options.data&&options.push("data:data"),options},setupParams:function(paramSize,params,useRegister){var options="{"+this.setupOptions(paramSize,params).join(",")+"}";return useRegister?(this.useRegister("options"),params.push("options"),"options="+options):(params.push(options),"")}};for(var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={},i=0,l=reservedWords.length;l>i;i++)compilerWords[reservedWords[i]]=!0;return JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)?!0:!1},__exports__=JavaScriptCompiler}(__module2__,__module5__),__module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__,Handlebars=__dependency1__,AST=__dependency2__,Parser=__dependency3__.parser,parse=__dependency3__.parse,Compiler=__dependency4__.Compiler,compile=__dependency4__.compile,precompile=__dependency4__.precompile,JavaScriptCompiler=__dependency5__,_create=Handlebars.create,create=function(){var hb=_create();return hb.compile=function(input,options){return compile(input,options,hb)},hb.precompile=function(input,options){return precompile(input,options,hb)},hb.AST=AST,hb.Compiler=Compiler,hb.JavaScriptCompiler=JavaScriptCompiler,hb.Parser=Parser,hb.parse=parse,hb};return Handlebars=create(),Handlebars.create=create,__exports__=Handlebars}(__module1__,__module7__,__module8__,__module10__,__module11__);return __module0__}();return Handlebars}),define("hbs/underscore",[],function(){function eq(a,b,stack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;if(a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped),a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=stack.length;length--;)if(stack[length]==a)return!0;stack.push(a);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=size in a==size in b&&eq(a[size],b[size],stack)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],stack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return stack.pop(),result}var breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return new wrapper(obj)};_.VERSION="1.3.3";var each=_.each=_.forEach=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(_.has(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),obj.length===+obj.length&&(results.length=obj.length),results)},_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError("Reduce of empty array with no initial value");return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var reversed=_.toArray(obj).reverse();return context&&!initial&&(iterator=_.bind(iterator,context)),initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator)},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){return iterator.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&(results[results.length]=value)}),results)},_.reject=function(obj,iterator,context){var results=[];return null==obj?results:(each(obj,function(value,index,list){iterator.call(context,value,index,list)||(results[results.length]=value)}),results)},_.every=_.all=function(obj,iterator,context){var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){return(result=result&&iterator.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){return result||(result=iterator.call(context,value,index,list))?breaker:void 0}),!!result)};_.include=_.contains=function(obj,target){var found=!1;return null==obj?found:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):found=any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-1/0;var result={computed:-1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return 1/0;var result={computed:1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,shuffled=[];return each(obj,function(value,index){rand=Math.floor(Math.random()*(index+1)),shuffled[index]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sortBy=function(obj,val,context){var iterator=_.isFunction(val)?val:function(obj){return obj[val]};return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;return void 0===a?1:void 0===b?-1:b>a?-1:a>b?1:0}),"value")},_.groupBy=function(obj,val){var result={},iterator=_.isFunction(val)?val:function(obj){return obj[val]};return each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value)}),result},_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);for(var low=0,high=array.length;high>low;){var mid=low+high>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):_.isArguments(obj)?slice.call(obj):obj.toArray&&_.isFunction(obj.toArray)?obj.toArray():_.values(obj):[]
},_.size=function(obj){return _.isArray(obj)?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==n||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=function(array,index,guard){return slice.call(array,null==index||guard?1:index)},_.compact=function(array){return _.filter(array,function(value){return!!value})},_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){return _.isArray(value)?memo.concat(shallow?value:_.flatten(value)):(memo[memo.length]=value,memo)},[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array,results=[];return array.length<3&&(isSorted=!0),_.reduce(initial,function(memo,value,index){return(isSorted?_.last(memo)===value&&memo.length:_.include(memo,value))||(memo.push(value),results.push(array[index])),memo},[]),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=_.flatten(slice.call(arguments,1),!0);return _.filter(array,function(value){return!_.include(rest,value)})},_.zip=function(){for(var args=slice.call(arguments),length=_.max(_.pluck(args,"length")),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(args,""+i);return results},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i,l;if(isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;l>i;i++)if(i in array&&array[i]===item)return i;return-1},_.lastIndexOf=function(array,item){if(null==array)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);for(var i=array.length;i--;)if(i in array&&array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var len=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(len);len>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor,result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);return 0==funcs.length&&(funcs=_.functions(obj)),each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait){var context,args,timeout,throttling,more,result,whenDone=_.debounce(function(){more=throttling=!1},wait);return function(){context=this,args=arguments;var later=function(){timeout=null,more&&func.apply(context,args),whenDone()};return timeout||(timeout=setTimeout(later,wait)),throttling?more=!0:result=func.apply(context,args),whenDone(),throttling=!0,result}},_.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)};immediate&&!timeout&&func.apply(context,args),clearTimeout(timeout),timeout=setTimeout(later,wait)}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments))}},_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return 0>=times?func():function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)_.has(obj,key)&&(keys[keys.length]=key);return keys},_.values=function(obj){return _.map(obj,_.identity)},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var result={};return each(_.flatten(slice.call(arguments,1)),function(key){key in obj&&(result[key]=obj[key])}),result},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)null==obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isEqual=function(a,b){return eq(a,b,[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!=obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},_.isArguments=function(obj){return"[object Arguments]"==toString.call(obj)},_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),_.isFunction=function(obj){return"[object Function]"==toString.call(obj)},_.isString=function(obj){return"[object String]"==toString.call(obj)},_.isNumber=function(obj){return"[object Number]"==toString.call(obj)},_.isFinite=function(obj){return _.isNumber(obj)&&isFinite(obj)},_.isNaN=function(obj){return obj!==obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isDate=function(obj){return"[object Date]"==toString.call(obj)},_.isRegExp=function(obj){return"[object RegExp]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var i=0;n>i;i++)iterator.call(context,i)},_.escape=function(string){return(""+string).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},_.result=function(object,property){if(null==object)return null;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/,escapes={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var p in escapes)escapes[escapes[p]]=p;var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g,unescaper=/\\(\\|'|r|n|t|u2028|u2029)/g,unescape=function(code){return code.replace(unescaper,function(match,escape){return escapes[escape]})};_.template=function(text,data,settings){settings=_.defaults(settings||{},_.templateSettings);var source="__p+='"+text.replace(escaper,function(match){return"\\"+escapes[match]}).replace(settings.escape||noMatch,function(match,code){return"'+\n_.escape("+unescape(code)+")+\n'"}).replace(settings.interpolate||noMatch,function(match,code){return"'+\n("+unescape(code)+")+\n'"}).replace(settings.evaluate||noMatch,function(match,code){return"';\n"+unescape(code)+"\n;__p+='"})+"';\n";settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+source+"return __p;\n";var render=new Function(settings.variable||"obj","_",source);if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj},addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);return unshift.call(args,this._wrapped),result(func.apply(_,args),this._chain)}};return _.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;return"shift"!=name&&"splice"!=name||0!==length||delete wrapped[0],result(wrapped,this._chain)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain)}}),wrapper.prototype.chain=function(){return this._chain=!0,this},wrapper.prototype.value=function(){return this._wrapped},_}),define("hbs/i18nprecompile",["hbs/handlebars","hbs/underscore"],function(Handlebars,_){function replaceLocaleStrings(ast,mapping,options){return options=options||{},mapping=mapping||{},ast&&"program"===ast.type&&ast.statements&&(_(ast.statements).forEach(function(statement,i){var newString="<!-- i18n error -->";if("mustache"===statement.type&&statement.id&&"$"===statement.id.original){if(statement.params.length&&statement.params[0].string){var key=statement.params[0].string;newString=mapping[key]||(options.originalKeyFallback?key:newString)}ast.statements[i]=new Handlebars.AST.ContentNode(newString)}else statement.program&&(statement.program=replaceLocaleStrings(statement.program,mapping,options))}),ast.inverse&&replaceLocaleStrings(ast.inverse,mapping,options)),ast}return function(string,mapping,options){options=options||{};var ast,environment;return ast=Handlebars.parse(string),mapping!==!1&&(ast=replaceLocaleStrings(ast,mapping,options)),environment=(new Handlebars.Compiler).compile(ast,options),(new Handlebars.JavaScriptCompiler).compile(environment,options)}}),function(window){var JSON=window.JSON||{};!function(){function f(n){return 10>n?"0"+n:n}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;length>i;i+=1)"string"==typeof rep[i]&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",{load:function(id){throw new Error("Dynamic load not allowed: "+id)}}),define("hbs!views/nav.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div id="local" class="local navbar navbar-default navbar-fixed-top navbar-inverse">\n    <div class="navbar-header">\n        <!--<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navCollapse">-->\n        <!--    <span class="sr-only">Toggle navigation</span>-->\n        <!--    <span class="icon-bar"></span>-->\n        <!--    <span class="icon-bar"></span>-->\n        <!--    <span class="icon-bar"></span>-->\n        <!--</button>-->\n\n        <a href="#index/index" class="navbar-brand"><img src="//developer.sabre.com/public/Mashery/images/clients/sabre/Sabre-Logo-2013.png"></a>\n        <h1 class="navbar-title"><a href="/">',(helper=helpers.appFullName)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.appFullName,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'</a></h1>\n    </div>\n    \n    <!--<div id="navCollapse" class="collapse navbar-collapse">-->\n    <!--    <ul id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-items" class="mainNav nav navbar-nav">-->\n    <!--        <li data-controller="index" class="active"><a href="#"><i class="fa fa-play"></i> Queue</a></li>-->\n    <!--        <li data-controller="job" ><a href="#job/index"><i class="fa fa-tasks"></i> Jobs</a></li>-->\n    <!--        <li data-controller="box" class=""><a href="#box/index"><i class="fa fa-cubes"></i> Boxes</a></li>-->\n    <!--        <li data-controller="script" class=""><a href="#script/index"><i class="fa fa-code"></i> Scripts</a></li>-->\n    <!--        <li data-controller="device" class=""><a href="#device/index"><i class="fa fa-mobile-phone"></i> Devices</a></li>-->\n    <!--    </ul>-->\n    <!--</div>-->\n</div>'});return t}),define("views/nav",["require","views/base","bluebird","hbs!./nav.tpl"],function(require){var Super=require("views/base"),Template=(require("bluebird"),require("hbs!./nav.tpl")),View=Super.extend({});return View.prototype.initialize=function(options){Super.prototype.initialize.call(this,options)},View.prototype.render=function(){var params={id:this.id,appFullName:window.app.config.get("fullName")};this.$el.html(Template(params)),this.mapControls();var events={};this.delegateEvents(events),this.listenTo(window.app,"page-rendered",this.onPageRendered.bind(this))},View.prototype.onPageRendered=function(page){var that=this;try{that.controls.items.find(">li").removeClass("active"),that.controls.items.find("[data-controller="+page.options.controller+"]").addClass("active")}catch(e){}},View}),define("hbs!views/layout.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<section id="container">\n    <header id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-nav" class="navbar navbar-default navbar-fixed-top header black-bg" role="navigation">\n    </header>\n    \n    <section class="wrapper">\n        <div class="controller">\n            <div class="main action">\n                <div id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-main-panel" class="main-container card">\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <footer id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-footer" class="site-footer footer hidden">\n        <div class="text-center copyright">',(helper=helpers.name)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.name,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+"\n            <small>v",(helper=helpers.version)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.version,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+"</small>\n        </div>\n    </footer>\n</section>\n\n"});return t}),define("views/layout",["require","views/base","views/nav","bootstrap","bluebird","hbs!views/layout.tpl"],function(require){var Super=require("views/base"),Nav=require("views/nav"),Bluebird=(require("bootstrap"),require("bluebird")),Template=require("hbs!views/layout.tpl"),Layout=Super.extend({el:"body"});return Layout.prototype.initialize=function(options){if(Super.prototype.initialize.call(this,options),!options.app)throw new Error("app must be passed!");this.app=options.app},Layout.prototype.render=function(){var that=this,loggedIn=window.app.session&&window.app.session.get("user");return that.$el.html(Template({id:that.id,name:window.config.fullName,version:window.config.version,loggedIn:loggedIn})),that.mapControls(),that.controls.container=$("#container"),that.controls.mainContent=$("#main-content"),that.nav=new Nav({el:that.controls.nav}),that.nav.render(),Bluebird.resolve()},Layout}),define("router",["require","nprogress","backbone","underscore","underscore.string","moment","toastr","bluebird"],function(require){var NProgress=require("nprogress"),Backbone=require("backbone"),S=(require("underscore"),require("underscore.string")),moment=require("moment"),Bluebird=(require("toastr"),require("bluebird")),Router=Backbone.Router.extend({routes:{"*action":"defaultAction"}});return Router.prototype.initialize=function(options){Backbone.Router.prototype.initialize.call(this,options),this.app=options.app||void 0},Router.prototype.defaultAction=function(url){var that=this;url||(url="index/index"),that.app.page&&(that.app.page.close(),that.app.trigger("closed"));var parts=url.split("/"),controller=parts[0]||"index",action=parts[1]||"index",params={now:moment().unix()};if(parts.length>2){var i;for(i=2;i<parts.length;i+=2)params[S.camelize(parts[i])]=parts[i+1]}NProgress.start();var pagePath="pages/"+controller+"/"+action;require([pagePath],function(Page){NProgress.inc(),that.app.page=new Page({el:that.app.layout.controls.mainPanel,controller:controller,action:action,app:that.app,params:params});var actionContainer=that.app.layout.controls.mainPanel.parent();actionContainer.attr("id","action-"+action);var controllerContainer=actionContainer.parent();controllerContainer.attr("id","controller-"+controller),NProgress.inc(),Bluebird.resolve(that.app.page.render()).then(function(){NProgress.done(),that.app.trigger("page-rendered",that.app.page)})}.bind(this))},Router.prototype.parseUrlParams=function(url){url||(url=window.location.hash);var parts=url.split("/"),params={};if(parts.length>2){var i;for(i=2;i<parts.length;i+=2)params[parts[i]]=decodeURIComponent(parts[i+1])}return params},Router.prototype.start=function(){Backbone.history.start()},Router}),define("config",["require","backbone","underscore"],function(require){var Backbone=require("backbone"),Super=(require("underscore"),Backbone.Model),Config=Super.extend({defaults:{baseUrl:window.config.baseUrl||window.location.origin,apiBaseUrl:window.config.apiBaseUrl||[window.location.origin,"api"].join("/")}});return Object.defineProperty(Config.prototype,"baseUrl",{get:function(){return this.get("baseUrl")}}),Object.defineProperty(Config.prototype,"apiBaseUrl",{get:function(){return this.get("apiBaseUrl")}}),Object.defineProperty(Config.prototype,"name",{get:function(){return this.get("name")}}),Object.defineProperty(Config.prototype,"version",{get:function(){return this.get("version")}}),Config}),define("socket",["require","backbone","moment"],function(require){var Backbone=require("backbone"),Super=Backbone.Model,Model=(require("moment"),Super.extend({}));return Model.prototype.initialize=function(){},Model.prototype.request=function(options){options||(options={}),options.url||(options.url=[options.controller||"index",options.action||"index"].join("/"),delete options.controller,delete options.action),options.data||(options.data={});var oldCallbacks=_.pick(options,"success","error"),callbacks={success:function(resp,textStatus,jqXHR){!oldCallbacks.success||oldCallbacks.success(resp,textStatus,jqXHR)!==!1}.bind(this),error:function(jqXHR,status,errorThrown){oldCallbacks.error&&oldCallbacks.error(jqXHR,status,errorThrown)===!1||this.trigger("error",jqXHR,status,errorThrown)}.bind(this)};return _.extend(options,callbacks),Backbone.ajax.call(this,options)},Model}),define("app",["require","./views/layout","./router","./config","./socket","toastr","bluebird"],function(require){var Super=Backbone.Model,Layout=require("./views/layout"),Router=require("./router"),Config=require("./config"),Socket=require("./socket"),Toastr=require("toastr"),B=require("bluebird"),App=Super.extend({});return App.prototype.initialize=function(options){Super.prototype.initialize.call(this,options)},App.prototype.initConfig=function(){return this.config=new Config(window.config),B.resolve()},App.prototype.initRouter=function(){return this.router=new Router({app:this}),B.resolve()},App.prototype.initSocket=function(){return this.socket=new Socket({app:this}),this.socket.on("error",function(jqXHR,statusCode){var options={code:statusCode,message:jqXHR.responseText};try{options=JSON.parse(jqXHR.responseText)}catch(e){}Toastr.error(options.message)}),Promise.resolve()},App.prototype.initLayout=function(){return this.layout=new Layout({app:this}),B.resolve()},App.prototype.run=function(){var that=this;return B.all([this.initConfig(),this.initLayout(),this.initSocket(),this.initRouter()]).then(function(){return that.layout.render()}).then(function(){return that.router.start()})},Object.defineProperty(App.prototype,"router",{get:function(){return this.get("router")},set:function(val){this.set("router",val)}}),Object.defineProperty(App.prototype,"layout",{get:function(){return this.get("layout")},set:function(val){this.set("layout",val)}}),Object.defineProperty(App.prototype,"config",{get:function(){return this.get("config")},set:function(val){this.set("config",val)}}),Object.defineProperty(App.prototype,"socket",{get:function(){return this.get("socket")},set:function(val){this.set("socket",val)}}),App}),requirejs.config({baseUrl:"./app",locale:"en-us",waitSeconds:30,paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min",text:"vendors/requirejs-plugins/lib/text",goog:"vendors/requirejs-plugins/src/goog",async:"vendors/requirejs-plugins/src/async",propertyParser:"vendors/requirejs-plugins/src/propertyParser",image:"vendors/requirejs-plugins/src/image",json:"vendors/requirejs-plugins/src/json",hbs:"vendors/require-handlebars-plugin/hbs",i18nprecompile:"vendors/require-handlebars-plugin/hbs/i18nprecompile",json2:"vendors/require-handlebars-plugin/hbs/json2",jquery:"//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min",bootstrapValidator:"//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.0/js/bootstrapValidator.min",toastr:"//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.0/js/toastr.min",ladda:"//cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.1.0/ladda.min",spin:"//cdnjs.cloudflare.com/ajax/libs/spin.js/2.0.0/spin.min",moment:"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min",nprogress:"//cdnjs.cloudflare.com/ajax/libs/nprogress/0.1.2/nprogress.min","underscore.string":"//cdnjs.cloudflare.com/ajax/libs/underscore.string/2.3.3/underscore.string.min",bluebird:"//cdnjs.cloudflare.com/ajax/libs/bluebird/1.2.2/bluebird",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min",select2:"//cdnjs.cloudflare.com/ajax/libs/select2/3.5.0/select2.min",ace:"//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace","socket.io":"//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min","data.io":"vendors/data.io/data.io",ansi:"vendors/ansi_up/ansi_up"},hbs:{helpers:!0,i18n:!0,templateExtension:"hbs",partialsUrl:"",disableI18n:!1},shim:{ace:{exports:"ace"},FileSaver:{exports:"saveAs"},underscore:{exports:"_"},resemble:{exports:"resemble"},select2:{deps:["jquery"],exports:"$.fn.select2"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},toastr:{deps:["jquery"]},"data.io":{deps:["socket.io"]},scrollTo:{deps:["jquery"]},nprogress:{deps:["jquery"],exports:"NProgress"},bootstrap:{deps:["jquery"]},ladda:{deps:["spin"],exports:"Ladda"},"jquery.cookie":{deps:["jquery"]},bootstrapValidator:{deps:["jquery","bootstrap"],exports:"$.fn.bootstrapValidator"},bootstrapSwitch:{deps:["jquery","bootstrap"],exports:"$.fn.bootstrapSwitch"},"bootstrap-switch":{deps:["jquery"]},socket:{deps:["backbone"]},ansi:{exports:"ansi_up"}}}),Function.prototype.bind||(Function.prototype.bind=function(bind){var self=this;return function(){var args=Array.prototype.slice.call(arguments);return self.apply(bind||null,args)}}),require(["app"],function(Application){window.app=new Application({}),window.app.run()}),define("init",function(){}),define("views/page",["require","./base","toastr","bluebird"],function(require){var Super=require("./base"),Toastr=require("toastr"),Bluebird=require("bluebird"),Page=Super.extend({});return Page.prototype.initialize=function(options){Super.prototype.initialize.call(this,options),this.app=options.app,this.layout=options.app.layout,this.router=options.app.router,this.session=options.app.session,this.socket=options.app.socket,this.toast=Toastr,this.config=window.app.config,this.params=options.params,this.toast.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}},Page.prototype.start=function(){return this.trigger("start"),Promise.resolve()},Page.prototype.render=function(){return this.ready()},Page.prototype.ready=function(){return this.trigger("ready"),Bluebird.resolve()},Page.prototype.cleanUp=function(){},Page.prototype.close=function(){this.cleanUp(),this.undelegateEvents(),this.$el.empty()},Page.prototype.reload=function(options,navOptions){var params=_.extend(this.options.params,{rand:(new Date).getTime()},options),url=this.generateHash(this.options.controller,this.options.action,params),navOpts=_.extend({trigger:!0,replace:!0},navOptions);this.router.navigate(url,navOpts)},Page.prototype.generateHash=function(controller,action,params){var parts=[controller,action],keys=_.keys(params);return _.forEach(keys,function(index){var value=params[index];void 0!==value&&""!==value&&(parts.push(index),parts.push(encodeURIComponent(value)))}),parts.join("/")},Page.prototype.backButtonClickHandler=function(event){event.preventDefault(),this.back()},Page.prototype.back=function(){return this.backUrl?void this.goTo(this.backUrl,{trigger:!0}):void window.history.back()},Page.prototype.setBackLink=function(){this.session.set("backUrl",window.location.hash)},Page.prototype.startWait=function(event){event&&event.currentTarget&&(this.ladda=Ladda.create(event.currentTarget),this.ladda.start()),NProgress.start()},Page.prototype.incWait=function(){NProgress.inc()},Page.prototype.stopWait=function(){this.ladda&&(this.ladda.stop(),delete this.ladda),NProgress.done()},Page.prototype.goTo=function(hash,options){var url=hash;_.isObject(hash)&&(url=this.generateHash(hash.controller||this.options.controller,hash.action||this.options.action,_.omit(hash,"controller","action"))),this.router.navigate(url,options||{trigger:!0})},Page.prototype.error=function(message,title){var that=this,msg="Unknown Error!",caption="Error!";return function(){return new Promise(function(resolve){var show=function(message,title){that.toast.error(message,title,{onHidden:function(){resolve()}})};if("string"===$.type(message))msg=message;else if(message.promise){var err=message.responseJSON||{};switch(err.type){case"ValidationError":msg="<ul>"+_.map(err.data,function(value){return"<li>"+(_.isArray(value)?value.join(", "):value)+"</li>"}).join("")+"</ul>",caption=err.message;break;default:_.isObject(err)&&(msg=_.map(err,function(value){return value}).join("<br />"))}}show(msg,caption)})}()},Page.prototype.success=function(message,title){var that=this,f=function(){return new Promise(function(resolve){that.toast.success(message,title,{onHidden:function(){resolve()}})})};return f()},Page}),define("hbs!pages/index/index.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="clearfix">\n    <div class="row">\n        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">\n            <input type="text" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-query" placeholder="Search" class="form-control" />\n        </div>\n        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-right">\n            <button class="btn btn-info" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-run-all"><i class="fa fa-play"></i> <span class="hidden-xs">Run All</span> </button>\n            <button class="btn btn-warning hidden" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-stop"><i class="fa fa-stop"></i> <span class="hidden-xs">Stop</span>\n            </button>\n            <button class="btn btn-success" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-new"><i class="fa fa-plus"></i> <span class="hidden-xs">New Site</span>\n            </button>\n        </div>\n    </div>\n</div>\n<div id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-sites" class="sites"></div>'
});return t}),define("hbs!pages/index/index/site-edit.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<form role="form">\n    <div class="form-group">\n        <label for="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-name">Name</label>\n        <input type="text" class="form-control ',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-field" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-name" placeholder="Name" value="'+escapeExpression((stack1=depth0&&depth0.data,stack1=null==stack1||stack1===!1?stack1:stack1.name,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n    </div>\n    <div class="form-group">\n        <label for="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-name">Tags</label>\n        <input type="text" class="form-control ',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-field" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-tags" placeholder="Tags" value="'+escapeExpression((stack1=depth0&&depth0.data,stack1=null==stack1||stack1===!1?stack1:stack1.tags,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n    </div>\n    <div class="form-group">\n        <label for="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-notification-receiver-emails">Schedule (<a href="https://github.com/matthewmueller/date#examples" target="_blank">See possible values</a>)</label>\n        <input type="text" class="form-control ',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-field" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-schedule" placeholder="Enter schedule for this site to run" value="'+escapeExpression((stack1=depth0&&depth0.data,stack1=null==stack1||stack1===!1?stack1:stack1.schedule,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n    </div>\n    <div class="form-group">\n        <label for="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-notification-receiver-emails">Notification Receiver Emails</label>\n        <input type="text" class="form-control ',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-field" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-notification-receiver-emails" placeholder="Comma separated email addresses which error notifications will be sent to" value="'+escapeExpression((stack1=depth0&&depth0.data,stack1=null==stack1||stack1===!1?stack1:stack1.notificationReceiverEmails,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n    </div>\n</form>\n'});return t}),define("pages/index/index/site-edit",["require","views/base","bluebird","select2","hbs!./site-edit.tpl"],function(require){var Super=require("views/base"),B=require("bluebird"),TEMPLATE=(require("select2"),require("hbs!./site-edit.tpl")),View=Super.extend({});return View.prototype.initialize=function(options){var that=this;Super.prototype.initialize.call(that,options)},View.prototype.render=function(){var that=this;that.$el.html(TEMPLATE({id:that.id,data:that.model.toJSON()})),that.mapControls(),that.controls.tags.select2({tags:[],tokenSeparators:[","," "]});var events={};return that.delegateEvents(events),B.resolve()},View.prototype.val=function(value){var that=this;return value?this:that.serialize()},View}),function(name,root,factory){"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define("data.io",factory):root[name]=factory()}("data",this,function(){function Resource(name,socket){this.name=name,this.socket=socket.io.socket("/"+this.name)}return Resource.prototype.sync=function(action,data,options,callback){void 0===callback&&(void 0===options&&"function"==typeof data?(callback=data,data={},options={}):"function"==typeof options&&(callback=options,options={})),this.socket.emit("sync",action,data,options,callback)},Resource.prototype.subscribe=function(){var args=[].slice.apply(arguments),callback=args.pop(),actions=args.length?args:["*"],valid=function(action){return-1!==actions.indexOf(action)};this.socket.on("sync",function(action,data){(valid(action)||valid("*"))&&callback(data,{action:action})})},function(socket){return{resource:function(name){return new Resource(name,socket)}}}}),define("connection",["require","socket.io","data.io"],function(require){var io=require("socket.io"),data=require("data.io"),Me=data(io.connect());return Me}),define("models/base",["require","backbone","underscore","connection","bluebird"],function(require){var Backbone=require("backbone"),_=require("underscore"),connection=require("connection"),B=require("bluebird"),Super=Backbone.Model,Model=Super.extend({url:function(){return"/rest/"+this.name+(this.id?"/"+this.id:"")},idAttribute:"_id"});return Model.prototype.initialize=function(options){var that=this,name=_.result(this,"name");Super.prototype.initialize.call(this,options),that.connection=connection,that.resource=B.promisifyAll(connection.resource(name))},Model.prototype.sync=function(method,model,options){var that=this;options||(options={});var success=options.success||function(){},error=options.error||function(){};return delete options.success,delete options.error,"read"!==method||model.id||(method="list"),new B(function(resolve,reject){that.resource.sync(method,model,options,function(err,res){return err?(error(err),reject(err)):(success(res),resolve(res))})})},Model.prototype.request=function(method,data){var that=this;return new B(function(resolve,reject){that.resource.sync(method,data,function(err,res){return err?reject(err):resolve(res)})})},Model.prototype.toJSON=function(){var data=Super.prototype.toJSON.apply(this,arguments);return!data.id&&this.id&&(data.id=this.id),data},Model}),define("models/module",["require","./base","underscore","bluebird"],function(require){var Super=require("./base"),Model=(require("underscore"),require("bluebird"),Super.extend({name:"module"}));return Model}),define("hbs!pages/index/index/code.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="alert alert-info"><i class="fa fa-info-circle"></i> Enter the script you for <a href="http://casperjs.org/" target="_blank">CasperJS</a> to executed in the editor below.</div>\n<div id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-script" style="height:45em;">',stack1=depth0&&depth0.data,stack1=null==stack1||stack1===!1?stack1:stack1.script,stack1=typeof stack1===functionType?stack1.apply(depth0):stack1,(stack1||0===stack1)&&(buffer+=stack1),buffer+='</div>\n<div id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-message">Your changes will be saved automatically.</div>'});return t}),define("text",{load:function(id){throw new Error("Dynamic load not allowed: "+id)}}),define("text!pages/index/index/code.script-template.tpl.hbs",[],function(){return"var casper = require('casper').create({\n        logLevel: 'info',\n        waitTimeout: 30000,\n        pageSettings: {\n            webSecurityEnabled: false,\n            loadImages: true,\n            loadPlugins: false\n        }\n    });\n\n/************************** TEST BEGIN **************************************/\nvar startUrl = '<Enter your starting URL here>';\ncasper.start(startUrl);\n\n\n\n/************************** TEST END **************************************/\n\ncasper.run(function() {\n    casper.exit();\n});"}),define("pages/index/index/code",["require","views/base","bluebird","hbs!./code.tpl","text!./code.script-template.tpl.hbs","ace"],function(require){var Super=require("views/base"),B=require("bluebird"),TEMPLATE=require("hbs!./code.tpl"),SCRIPT_TEMPLATE=require("text!./code.script-template.tpl.hbs"),View=(require("ace"),Super.extend({}));return View.prototype.initialize=function(options){var that=this;Super.prototype.initialize.call(this,options),that.moduleIndex=options.moduleIndex,that.module=options.module},View.prototype.render=function(){var that=this;that.$el.html(TEMPLATE({id:that.id,data:_.extend(that.module,{script:that.module.script||SCRIPT_TEMPLATE})})),that.mapControls(),_.defer(function(){that.children.editor=ace.edit(that.controls.script.attr("id")),that.children.editor.setTheme("ace/theme/monokai"),that.children.editor.getSession().setMode("ace/mode/javascript"),that.children.editor.on("change",function(){that.save({script:that.children.editor.getValue()})})});var events={};that.delegateEvents(events)},View.prototype.save=_.debounce(function(params){var that=this;that.controls.message.html('<i class="fa fa-spinner fa-spin"></i> Saving...').removeClass("text-success").addClass("text-warning");var modules=that.model.get("modules")||[];return _.extend(modules[that.moduleIndex],params),B.resolve(that.model.save()).then(function(){that.controls.message.html('<i class="fa fa-check"></i> Saved.').removeClass("text-warning").addClass("text-success")})},300),View}),define("hbs!views/controls/dialog.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data,depth1){var stack1,buffer="";return buffer+='\n                    <button id="'+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+"-button-"+escapeExpression((stack1=depth0&&depth0.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-id="'+escapeExpression((stack1=depth0&&depth0.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" type="button" class="btn '+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+"-button "+escapeExpression((stack1=depth0&&depth0.buttonClass,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"><i class="'+escapeExpression((stack1=depth0&&depth0.iconClass,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"></i> '+escapeExpression((stack1=depth0&&depth0.label,typeof stack1===functionType?stack1.apply(depth0):stack1))+"</button>\n                "}function program3(depth0,data,depth1){var stack1,buffer="";return buffer+='\n                    <button id="'+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+"-button-"+escapeExpression((stack1=depth0&&depth0.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-id="'+escapeExpression((stack1=depth0&&depth0.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" type="button" class="btn '+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+"-button  "+escapeExpression((stack1=depth0&&depth0.buttonClass,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"><i class="'+escapeExpression((stack1=depth0&&depth0.iconClass,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"></i> '+escapeExpression((stack1=depth0&&depth0.label,typeof stack1===functionType?stack1.apply(depth0):stack1))+"</button>\n                "}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="modal-dialog ',(helper=helpers.sizeClass)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.sizeClass,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'">\n    <div class="modal-content">\n        <div class="modal-header ',(helper=helpers.headerClass)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.headerClass,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'">\n            <h4 class="modal-title">',(helper=helpers.title)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.title,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+='</h4>\n        </div>\n        <div id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-body" class="modal-body">\n\n        </div>\n        <div id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-footer" class="modal-footer clearfix">\n            <div class="pull-right right-buttons">\n                ',stack1=helpers.each.call(depth0,depth0&&depth0.rightButtons,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,program1,data,depth0)}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n            </div>\n            <div class="pull-left left-buttons">\n                ',stack1=helpers.each.call(depth0,depth0&&depth0.leftButtons,{hash:{},inverse:self.noop,fn:self.programWithDepth(3,program3,data,depth0)}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            </div>\n            \n        </div>\n    </div>\n</div>\n"});return t}),define("views/controls/dialog",["require","../base","hbs!./dialog.tpl"],function(require){var Super=require("../base"),Template=require("hbs!./dialog.tpl"),View=Super.extend({className:"modal fade"});return View.instanceCount=0,View.prototype.initialize=function(options){var that=this;Super.prototype.initialize.call(that,options),options.buttons?that.buttons=options.buttons instanceof Backbone.Collection?options.buttons:new Backbone.Collection(options.buttons):(that.buttons=new Backbone.Collection,that.buttons.add({id:"ok",label:"OK",iconClass:"fa fa-check-circle",buttonClass:"btn-primary",align:"left"}),that.buttons.add({id:"cancel",label:"Cancel",iconClass:"fa fa-times",buttonClass:"btn-default",align:"left",autoClose:!0})),that.buttons.forEach(function(button,index){if(!button.id)throw new Error("Button "+index+" does not have an id!")}),this.options.autoOpen!==!1&&this.open(),this.instanceCount=++View.instanceCount},View.prototype.open=function(){var that=this;this.$el.html(Template({id:this.getId(),sizeClass:this.options.sizeClass,title:this.options.title||"",headerClass:this.options.title?"":"hide",leftButtons:_.map(that.buttons.filter(function(button){return!button.get("align")||"left"==button.get("align")}),function(button){return button.toJSON()}),rightButtons:_.map(that.buttons.filter(function(button){return"right"===button.get("align")}),function(button){return button.toJSON()})})),this.mapControls();var msg=this.options.body||this.options.message;msg&&(msg instanceof Super?(msg.render(),msg.$el.appendTo(this.controls.body)):this.controls.body.html(msg)),this.$el.appendTo($("body")),this.$el.modal({keyboard:!1,show:!0,backdrop:"static"}),this.$el.on("shown.bs.modal",function(){this.options.body&&this.options.body instanceof Super&&this.options.body.focus&&this.options.body.focus(),that.$el.css("z-index",1040+that.instanceCount+1),that.$el.next().css("z-index",1040+that.instanceCount)}.bind(this)),this.$el.on("hidden.bs.modal",function(){msg instanceof Super&&msg.remove(),this.remove(),View.instanceCount--,this.trigger("closed")}.bind(this));var events={};events["click "+that.toClass("button")]="onButtonClickHandler",this.delegateEvents(events)},View.prototype.onButtonClickHandler=function(event){var that=this;event.preventDefault();var e=$(event.currentTarget),model=that.buttons.get(e.data("id"));that.trigger(model.id,model),model.get("autoClose")&&that.close()},View.prototype.close=function(){this.$el.modal("hide")},Object.defineProperty(View.prototype,"body",{get:function(){return this.options.body instanceof Super?this.options.body:this.controls.body}}),View}),define("hbs!pages/index/index/modules.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(){return"checked"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<table class="table table-condensed table-hover">\n    <thead>\n        <tr>\n            <th width="1%">\n                    <input type="checkbox" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-all-modules-checkbox" ',stack1=helpers["if"].call(depth0,depth0&&depth0.allModulesChecked,{hash:{},inverse:self.noop,fn:self.program(1,program1,data)}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' />\n                    <i class="fa fa-spin fa-spinner hidden" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-all-modules-checkbox-spinner"></i>\n            </th>\n            <th width="99%">Name</th>\n            <th width="1%">\n                <button class="btn btn-sm btn-success btn-block" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-new"><i class="fa fa-plus"></i> New Module</button>\n            </th>\n        </tr>\n    </thead>\n    <tbody id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-modules">\n    </tbody>\n</table>\n'});return t}),define("hbs!pages/index/index/modules.list.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n    <tr>\n        <td>\n            <input type="checkbox" data-index="'+escapeExpression((stack1=null==data||data===!1?data:data.index,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" id="'+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+"-module-checkbox-",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="'+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'-module-checkbox" ',stack1=helpers["if"].call(depth0,depth0&&depth0.isEnabled,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' />\n        </td>\n        <td>\n            <input type="text" value="'+escapeExpression((stack1=depth0&&depth0.name,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-index="'+escapeExpression((stack1=null==data||data===!1?data:data.index,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" class="form-control input-sm '+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'-name" />\n        </td>\n        <td class="text-nowrap">\n            <button class="btn btn-xs btn-default '+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'-code" data-index="'+escapeExpression((stack1=null==data||data===!1?data:data.index,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"><i class="fa fa-code"></i>\n            </button>\n            <button class="btn btn-xs btn-danger '+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'-remove" data-index="'+escapeExpression((stack1=null==data||data===!1?data:data.index,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"><i class="fa fa-trash-o"></i>\n            </button>\n        </td>\n    </tr>\n'}function program2(){return" checked "}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;return stack1=helpers.each.call(depth0,depth0&&depth0.modules,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,program1,data,depth0),data:data}),stack1||0===stack1?stack1:""});return t}),define("pages/index/index/modules",["require","views/base","bluebird","models/module","./code","views/controls/dialog","hbs!./modules.tpl","hbs!./modules.list.tpl"],function(require){var Super=require("views/base"),CodeView=(require("bluebird"),require("models/module"),require("./code")),Dialog=require("views/controls/dialog"),TEMPLATE=require("hbs!./modules.tpl"),LIST=require("hbs!./modules.list.tpl"),View=Super.extend({});return View.prototype.initialize=function(options){Super.prototype.initialize.call(this,options)},View.prototype.render=function(){var that=this;that.$el.html(TEMPLATE({id:that.id})),that.mapControls();var events={};events["click "+that.toId("new")]="newButtonClickHandler",events["click "+that.toClass("remove")]="removeButtonClickHandler",events["click "+that.toClass("code")]="codeButtonClickHandler",events["click "+that.toId("all-modules-checkbox")]="allModulesCheckboxClickHandler",events["click "+that.toClass("module-checkbox")]="moduleCheckboxClickHandler",events["change "+that.toClass("name")]="onNameChange",that.delegateEvents(events),that.renderModules(),that.model.on("change:module sync",that.renderModules.bind(that))},View.prototype.onNameChange=function(event){var that=this,e=$(event.currentTarget),modules=that.model.get("modules")||[];return modules[e.data("index")].name=e.val().trim(),that.model.set("modules",modules),that.model.save()},View.prototype.removeButtonClickHandler=function(event){var that=this,e=$(event.currentTarget),modules=that.model.get("modules")||[],module=modules[e.data("index")],buttons=[{id:"yes",label:"Yes, I'm sure",iconClass:"fa fa-trash-o",buttonClass:"btn-danger",align:"left"},{id:"no",label:"No",iconClass:"fa fa-times",buttonClass:"btn-default",align:"right",autoClose:!0}],dlg=new Dialog({sizeClass:"modal-lg",body:"Are you sure you want to delete: "+module.name,title:"Confirmation",buttons:buttons});dlg.on("yes",function(){that.model.set("modules",_.filter(modules,function(m,i){return i!==parseInt(e.data("index"),10)})),that.model.save(),that.renderModules(),dlg.close()})},View.prototype.codeButtonClickHandler=function(event){var dlg,that=this,e=$(event.currentTarget),modules=that.model.get("modules")||[],model=modules[e.data("index")],view=new CodeView({model:that.model,moduleIndex:e.data("index"),module:model}),buttons=[{id:"done",label:"Done",iconClass:"fa fa-check",buttonClass:"btn-primary",align:"left",autoClose:!0}];dlg=new Dialog({sizeClass:"modal-lg",body:view,title:"Script for "+model.name,buttons:buttons}),dlg.on("save",function(){_.extend(modules[e.data("index")],view.serialize()),that.model.set("modules",modules),that.model.save(),dlg.close()})},View.prototype.newButtonClickHandler=function(){var that=this,modules=that.model.get("modules")||[];return modules.push({name:"New Module"}),that.model.set("modules",modules),that.model.save()},View.prototype.allModulesCheckboxClickHandler=function(){var that=this,isEnabled=that.controls.allModulesCheckbox.prop("checked"),modules=that.model.get("modules")||[];return that.model.set("modules",_.map(modules,function(model,index){return that.findById("module-checkbox-"+index).prop("checked",isEnabled),model.isEnabled=isEnabled,model})),that.model.save()},View.prototype.moduleCheckboxClickHandler=function(event){var that=this;that.findByClass("module-checkbox").size()===that.findByClass("module-checkbox:checked").size()?that.findById("all-modules-checkbox").attr("checked","checked"):that.findById("all-modules-checkbox").removeAttr("checked");var e=$(event.currentTarget),modules=that.model.get("modules")||[];return modules[e.data("index")].isEnabled=e.prop("checked"),that.model.set("modules",modules),that.model.save()},View.prototype.renderModules=function(){var that=this;that.controls.modules.html(LIST({id:that.id,modules:_.map(that.model.get("modules")||[],function(module){return module})})),that.controls.allModulesCheckbox.prop("checked",(that.model.get("modules")||[]).length>0&&_.every(that.model.get("modules")||[],function(model){return model.isEnabled}))},View}),function(){function Ansi_Up(){this.fg=this.bg=null,this.bright=0}var ansi_up,hasModule="undefined"!=typeof module,ANSI_COLORS=[[{color:"0, 0, 0","class":"ansi-black"},{color:"187, 0, 0","class":"ansi-red"},{color:"0, 187, 0","class":"ansi-green"},{color:"187, 187, 0","class":"ansi-yellow"},{color:"0, 0, 187","class":"ansi-blue"},{color:"187, 0, 187","class":"ansi-magenta"},{color:"0, 187, 187","class":"ansi-cyan"},{color:"255,255,255","class":"ansi-white"}],[{color:"85, 85, 85","class":"ansi-bright-black"},{color:"255, 85, 85","class":"ansi-bright-red"},{color:"0, 255, 0","class":"ansi-bright-green"},{color:"255, 255, 85","class":"ansi-bright-yellow"},{color:"85, 85, 255","class":"ansi-bright-blue"},{color:"255, 85, 255","class":"ansi-bright-magenta"},{color:"85, 255, 255","class":"ansi-bright-cyan"},{color:"255, 255, 255","class":"ansi-bright-white"}]];Ansi_Up.prototype.escape_for_html=function(txt){return txt.replace(/[&<>]/gm,function(str){return"&"==str?"&amp;":"<"==str?"&lt;":">"==str?"&gt;":void 0})},Ansi_Up.prototype.linkify=function(txt){return txt.replace(/(https?:\/\/[^\s]+)/gm,function(str){return'<a href="'+str+'">'+str+"</a>"})},Ansi_Up.prototype.ansi_to_html=function(txt,options){var data4=txt.split(/\033\[/),first=data4.shift(),self=this,data5=data4.map(function(chunk){return self.process_chunk(chunk,options)});data5.unshift(first);var flattened_data=data5.reduce(function(a,b){return Array.isArray(b)?a.concat(b):(a.push(b),a)},[]),escaped_data=flattened_data.join("");return escaped_data},Ansi_Up.prototype.process_chunk=function(text,options){options="undefined"==typeof options?{}:options;var use_classes="undefined"!=typeof options.use_classes&&options.use_classes,key=use_classes?"class":"color",matches=text.match(/([\d;]*)m([\s\S]*)/m);if(!matches)return text;var orig_txt=matches[2],nums=matches[1].split(";"),self=this;if(nums.map(function(num_str){var num=parseInt(num_str);isNaN(num)||0===num?(self.fg=self.bg=null,self.bright=0):1===num?self.bright=1:num>=30&&38>num?self.fg=ANSI_COLORS[self.bright][num%10][key]:num>=90&&98>num?self.fg=ANSI_COLORS[1][num%10][key]:num>=40&&48>num?self.bg=ANSI_COLORS[0][num%10][key]:num>=100&&108>num&&(self.bg=ANSI_COLORS[1][num%10][key])}),null===self.fg&&null===self.bg)return orig_txt;var styles=classes=[];return self.fg&&(use_classes?classes.push(self.fg+"-fg"):styles.push("color:rgb("+self.fg+")")),self.bg&&(use_classes?classes.push(self.bg+"-bg"):styles.push("background-color:rgb("+self.bg+")")),use_classes?['<span class="'+classes.join(" ")+'">',orig_txt,"</span>"]:['<span style="'+styles.join(";")+'">',orig_txt,"</span>"]},ansi_up={escape_for_html:function(txt){var a2h=new Ansi_Up;return a2h.escape_for_html(txt)},linkify:function(txt){var a2h=new Ansi_Up;return a2h.linkify(txt)},ansi_to_html:function(txt,options){var a2h=new Ansi_Up;return a2h.ansi_to_html(txt,options)},ansi_to_html_obj:function(){return new Ansi_Up}},hasModule&&(module.exports=ansi_up),"undefined"!=typeof window&&"undefined"==typeof ender&&(window.ansi_up=ansi_up),"function"==typeof define&&define.amd&&define("ansi_up",[],function(){return ansi_up})}(Date),define("ansi",function(global){return function(){var ret;return ret||global.ansi_up}}(this)),define("hbs!models/execution-status/html.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<span class="',(helper=helpers.className)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.className,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'"><i class="fa ',(helper=helpers.iconClassName)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.iconClassName,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'"></i> ',(helper=helpers.text)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.text,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+"</span>"});return t}),define("models/execution-status",["require","./base","hbs!./execution-status/html.tpl"],function(require){var Super=require("./base"),Model=(require("hbs!./execution-status/html.tpl"),Super.extend({name:"execution-status"}));return Model.ID_SCHEDULED=-1,Model.ID_NOT_STARTED=1,Model.ID_RUNNING=2,Model.ID_OK=3,Model.ID_ERROR=4,Model.ID_TERMINATED=5,Model}),define("hbs!pages/index/index/site-widget.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers);var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="panel-heading" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-header">\n  <span class="pull-right">\n    <i class="fa" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-icon"></i>\n  </span>\n\n  <h3 class="panel-title" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-name">'+escapeExpression((stack1=depth0&&depth0.data,stack1=null==stack1||stack1===!1?stack1:stack1.name,typeof stack1===functionType?stack1.apply(depth0):stack1))+'</h3>\n</div>\n\n<ul class="list-group modules" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-modules">\n\n</ul>\n\n<div class="panel-footer clearfix">\n  <div class="btn-group pull-right">\n    <button class="btn btn-xs btn-default" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-edit"><i class="fa fa-edit"></i> <span class="hidden-xs">Edit</span>\n    </button>\n    <button class="btn btn-xs btn-default" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-show-modules"><i class="fa fa-tasks"></i> <span class="hidden-xs">Modules</span>\n    </button>\n  </div>\n\n  \n  <button class="btn btn-xs btn-success hidden" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-run"><i class="fa fa-play"></i> <span class="hidden-xs">Run</span></button>\n  <button class="btn btn-xs btn-warning hidden" id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{}}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{}}):helper),buffer+=escapeExpression(stack1)+'-stop"><i class="fa fa-stop"></i> <span class="hidden-xs">Stop</span></button>\n</div>\n'
});return t}),define("hbs!pages/index/index/module-list.tpl",["hbs","hbs/handlebars"],function(hbs,Handlebars){var t=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n    <li class="list-group-item clearfix '+escapeExpression((stack1=depth1&&depth1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'-module" data-index="'+escapeExpression((stack1=null==data||data===!1?data:data.index,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n        <i class="fa ',(helper=helpers.iconClass)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.iconClass,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+' status pull-right"></i>\n        <div class="name">',(helper=helpers.name)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.name,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</div>\n    </li>\n"}function program3(){return'\n    <li class="list-group-item list-group-item-warning"><i class="fa fa-exclamation-triangle"></i> There is no modules.</li>\n'}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return stack1=helpers.each.call(depth0,depth0&&depth0.modules,{hash:{},inverse:self.program(3,program3,data),fn:self.programWithDepth(1,program1,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n"});return t}),define("pages/index/index/site-widget",["require","views/base","bluebird","./site-edit","./modules","views/controls/dialog","ansi","models/execution-status","hbs!./site-widget.tpl","hbs!./module-list.tpl"],function(require){var Super=require("views/base"),B=require("bluebird"),EditView=require("./site-edit"),ModulesView=require("./modules"),Dialog=require("views/controls/dialog"),ansi=require("ansi"),ExecutionStatus=require("models/execution-status"),TEMPLATE=require("hbs!./site-widget.tpl"),MODULE_LIST=require("hbs!./module-list.tpl"),View=Super.extend({className:"panel panel-default site"});return View.prototype.initialize=function(options){Super.prototype.initialize.call(this,options)},View.prototype.render=function(){var that=this;that.$el.html(TEMPLATE({id:that.id})),that.mapControls();var events={};return events["click "+that.toId("header")]="onHeaderClick",events["click "+that.toId("edit")]="onEditClick",events["click "+that.toId("show-modules")]="onModulesClick",events["click "+that.toClass("module")]="onModuleClick",events["click "+that.toId("run")]="onRunClick",events["click "+that.toId("stop")]="onStopClick",that.delegateEvents(events),that.model.on("sync change",that.draw.bind(that)),that.model.on("destroy",that.remove.bind(that)),that.draw(),B.resolve()},View.prototype.remove=function(){return Super.prototype.remove.apply(this,arguments)},View.prototype.draw=function(){var that=this;that.controls.name.text(that.model.get("name")),!_.isEmpty(that.model.get("modules"))&&_.contains([ExecutionStatus.ID_OK,ExecutionStatus.ID_NOT_STARTED,ExecutionStatus.ID_TERMINATED,ExecutionStatus.ID_ERROR],that.model.get("status"))?that.controls.run.removeClass("hidden"):that.controls.run.addClass("hidden"),!_.isEmpty(that.model.get("modules"))&&_.contains([ExecutionStatus.ID_RUNNING,ExecutionStatus.ID_SCHEDULED],that.model.get("status"))?that.controls.stop.removeClass("hidden"):that.controls.stop.addClass("hidden");var iconClass="fa-square-o",panelClass="panel-default";switch(that.model.get("status")){case ExecutionStatus.ID_SCHEDULED:iconClass="fa-clock-o text-info",panelClass="panel-info";break;case ExecutionStatus.ID_ERROR:iconClass="fa-exclamation-circle text-danger",panelClass="panel-danger";break;case ExecutionStatus.ID_RUNNING:iconClass="fa-spinner fa-spin text-warning",panelClass="panel-warning";break;case ExecutionStatus.ID_RUNNING:iconClass="fa-check text-success",panelClass="panel-success";break;case ExecutionStatus.ID_TERMINATED:iconClass="fa-exclamation text-warning",panelClass="panel-warning";break;case ExecutionStatus.ID_OK:iconClass="fa-check-square text-success",panelClass="panel-success"}that.controls.icon.attr("class","fa "+iconClass),that.$el.removeClass("panel-default panel-danger panel-success panel-warning panel-info").addClass(panelClass),that.controls.modules.html(MODULE_LIST({id:that.id,modules:_.sortBy(_.map(_.filter(that.model.get("modules")||[],function(module){return module.isEnabled}),function(module){return _.extend(module,{iconClass:function(){switch(module.status){case ExecutionStatus.ID_RUNNING:return"fa-spinner fa-spin text-warning";case ExecutionStatus.ID_OK:return"fa-check text-success";case ExecutionStatus.ID_ERROR:return"fa-exclamation-circle text-danger";default:return"fa-square-o"}}()})}),function(module){return module.name})}))},View.prototype.onHeaderClick=function(event){event.preventDefault(),this.$el.toggleClass("expanded")},View.prototype.onModuleClick=function(event){var dlg,that=this,e=$(event.currentTarget),modules=that.model.get("modules")||[],moduleIndex=e.data("index"),module=modules[moduleIndex];event.preventDefault();var html="<code>"+ansi.ansi_to_html(module.logs||"")+"</code>",buttons=[{id:"close",label:"Close",iconClass:"fa fa-times",buttonClass:"btn-default",align:"left",autoClose:!0}];dlg=new Dialog({sizeClass:"modal-lg terminal",body:html,title:"View Log "+module.name||"",buttons:buttons}),dlg.on("shown",function(){})},View.prototype.onRunClick=function(event){var that=this;return event.preventDefault(),that.run()},View.prototype.onStopClick=function(event){var that=this;return event.preventDefault(),that.model.stop()},View.prototype.run=function(){var that=this;return that.controls.run.addClass("hidden"),that.controls.stop.removeClass("hidden"),that.model.run().then(function(){that.trigger("schedule")})},View.prototype.startUpdateStatusProcess=function(){var that=this;return B.resolve(that.model.modules.fetch({data:{siteId:that.model.id}})).then(function(){void 0!==that.model.modules.find(function(module){return module.get("status")===ExecutionStatus.ID_RUNNING})?_.delay(that.startUpdateStatusProcess.bind(that),5e3):that.trigger("completed")})},View.prototype.onEditClick=function(event){event.preventDefault(),event.stopPropagation(),this.showEditDialog()},View.prototype.showEditDialog=function(){var dlg,that=this,isNew=that.model.isNew(),view=new EditView({model:that.model}),buttons=[{id:"save",label:"Save",iconClass:"fa fa-save",buttonClass:"btn-primary",align:"left"},{id:"cancel",label:"Cancel",iconClass:"fa fa-times",buttonClass:"btn-default",align:"left",autoClose:!0}];isNew||(buttons.push({id:"clone",label:"Clone",iconClass:"fa fa-copy",buttonClass:"btn-info",align:"right"}),buttons.push({id:"delete",label:"Delete",iconClass:"fa fa-trash-o",buttonClass:"btn-danger",align:"right"})),dlg=new Dialog({sizeClass:"modal-lg",body:view,title:"Edit:"+that.model.get("name"),buttons:buttons}),dlg.on("save",function(){B.resolve(that.model.save(view.val(),{patch:!0,wait:!0})).then(function(){dlg.close()})}),dlg.on("delete",function(){var confirmDlg=new Dialog({body:"Are you sure you want to delete "+that.model.get("name")+"?",buttons:[{id:"delete",label:"Delete",iconClass:"fa fa-trash-o",buttonClass:"btn-danger",autoClose:!1},{id:"no",label:"Nope!",iconClass:"fa fa-times",autoClose:!0}]});confirmDlg.on("delete",function(){B.resolve(that.model.destroy({wait:!0})).then(function(){_.delay(function(){confirmDlg.close(),dlg.close(),that.remove()},1e3)})})}),dlg.on("clone",function(){B.resolve(that.model.duplicate()).then(function(result){that.trigger("cloned",result),dlg.close()})})},View.prototype.showModulesDialog=function(){{var that=this,view=new ModulesView({model:that.model}),buttons=[{id:"done",label:"Done",iconClass:"fa fa-check",buttonClass:"btn-primary",align:"left",autoClose:!0}];new Dialog({sizeClass:"modal-lg",body:view,title:"Modules of "+that.model.get("name"),buttons:buttons})}},View.prototype.onModulesClick=function(event){event.preventDefault(),this.showModulesDialog()},View.prototype.remove=function(){Super.prototype.remove.call(this)},View}),define("collections/base",["require","../models/base","connection","bluebird"],function(require){var Super=Backbone.Collection,Model=require("../models/base"),connection=require("connection"),B=require("bluebird"),Collection=Super.extend({model:Model});return Collection.prototype.initialize=function(options){var url,that=this,name=this.name||this.model.prototype.name;Super.prototype.initialize.call(this,options),_.isEmpty(_.result(this,"url"))&&(url=_.result(this.model.prototype,"url"),this.url=_.isEmpty(url)?"/rest"+(this.name||this.model.prototype.name):url),this.connection=connection,this.resource=connection.resource(name),that.resource.subscribe("create",function(data){that.add(data)}),that.resource.subscribe("update","patch",function(data,action){var item=that.get(data._id);item&&(item.set(data,{silent:!0}),item.trigger("sync",item,data))}),that.resource.subscribe("delete",function(data){that.remove(data._id)})},Collection.prototype.sync=function(method,model,options){var that=this;options||(options={});var success=options.success||function(){},error=options.error||function(){};return delete options.success,delete options.error,"read"!==method||model.id||(method="list"),new B(function(resolve,reject){that.resource.sync(method,model,options,function(err,res){return err?(error(err),reject(err)):(success(res),void resolve(res))})})},Collection}),define("collections/module",["require","underscore","./base","../models/module"],function(require){var Super=(require("underscore"),require("./base")),Model=require("../models/module"),Collection=Super.extend({model:Model,comparator:"name"});return Collection}),define("models/site",["require","./base","bluebird","./execution-status","collections/module","underscore"],function(require){var Super=require("./base"),B=require("bluebird"),ExecutionStatus=require("./execution-status"),_=(require("collections/module"),require("underscore")),Model=Super.extend({name:"site"});return Model.prototype.run=function(){var that=this,modules=_.map(that.get("modules")||[],function(m){return m.status=ExecutionStatus.ID_SCHEDULED,m});return that.save({requestType:"run",modules:modules}).then(function(result){return that.set("requestType",void 0),B.resolve(result)})},Model.prototype.duplicate=function(){var clonedModel=new Model(_.omit(this.toJSON(),"id","_id"));return clonedModel.set("name","Copy of "+clonedModel.get("name")),B.resolve(clonedModel.save()).then(function(){return clonedModel})},Model.prototype.stop=function(){var that=this;return that.save({requestType:"stop"}).then(function(result){return that.set("requestType",void 0),B.resolve(result)})},Model}),define("collections/site",["require","underscore","./base","../models/site"],function(require){var Super=(require("underscore"),require("./base")),Model=require("../models/site"),Collection=Super.extend({model:Model,comparator:"name"});return Collection}),define("pages/index/index",["require","views/page","bluebird","hbs!./index.tpl","backbone","./index/site-edit","./index/site-widget","models/execution-status","views/controls/dialog","collections/site","collections/module","models/site"],function(require){var Super=require("views/page"),B=require("bluebird"),MAIN=require("hbs!./index.tpl"),SiteEdit=(require("backbone"),require("./index/site-edit")),SiteWidget=require("./index/site-widget"),ExecutionStatus=require("models/execution-status"),Dialog=require("views/controls/dialog"),Sites=require("collections/site"),Modules=require("collections/module"),Site=require("models/site"),Page=Super.extend({});return Page.prototype.initialize=function(options){var that=this;Super.prototype.initialize.call(that,options),that.sites=new Sites,that.modules=new Modules},Page.prototype.render=function(){var that=this;that.$el.html(MAIN({id:that.id})),that.mapControls();var events={};return events["keyup "+that.toId("query")]="onQueryKeyup",events["click "+that.toId("new")]="onNewClick",events["click "+that.toId("run-all")]="onRunAllClick",events["click "+that.toId("stop")]="onStopClick",that.delegateEvents(events),that.sites.on("sync add",that.renderSites.bind(that)),that.sites.on("remove",that.onSiteRemove.bind(that)),that.sites.on("change",that.onSiteChange.bind(that)),that.fetch(),Super.prototype.render.call(that)},Page.prototype.onSiteChange=function(){this.updateUI()},Page.prototype.updateUI=function(){var that=this;that.sites.every(function(site){return _.contains([ExecutionStatus.ID_RUNNING,ExecutionStatus.ID_SCHEDULED],site.get("status"))?!1:!0})&&that.controls.runAll.prop("disabled",!1)},Page.prototype.onSiteRemove=function(removedSite){removedSite.view.remove()},Page.prototype.addSiteToCollection=function(site){this.sites.add(site)},Page.prototype.renderSites=function(){var that=this;B.all(_.map(that.sites.filter(function(site){return!site.isRendered}),function(site){return site.view=new SiteWidget({model:site}),site.isRendered=!0,site.view.on("cloned",function(clonedModel){that.addSiteToCollection(clonedModel)}),site.view.render().then(function(){that.controls.sites.append(site.view.$el),site.view.on("schedule",that.onSiteScheduled.bind(that))})})),that.updateUI()},Page.prototype.onSiteScheduled=function(){var that=this;that.toast.success("Job has been scheduled to start in 10 seconds.")},Page.prototype.onRunAllCompleted=function(){this.controls.runAll.removeClass("hidden"),this.controls["new"].removeClass("hidden"),this.controls.stop.addClass("hidden")},Page.prototype.onRunAllTerminated=function(){this.controls.runAll.removeClass("hidden"),this.controls["new"].removeClass("hidden"),this.controls.stop.addClass("hidden")},Page.prototype.onRunAllStarted=function(){this.controls.runAll.addClass("hidden"),this.controls["new"].addClass("hidden"),this.controls.stop.removeClass("hidden")},Page.prototype.onStopClick=function(){var that=this;that.runAllStopRequested=!0},Page.prototype.onQueryKeyup=_.debounce(function(){var that=this,query=that.controls.query.val().trim();if(_.isEmpty(query))that.sites.forEach(function(site){site.view&&site.view.$el.removeClass("hidden")});else{var re=new RegExp(query,"i");that.sites.forEach(function(site){site.view&&site.view.$el.toggleClass("hidden",!re.test(site.get("tags")+","+site.get("name")))})}},300),Page.prototype.onRunAllClick=function(){var that=this;that.controls.runAll.prop("disabled",!0),B.all(_.map(that.sites.filter(function(site){return site.view&&!site.view.$el.hasClass("hidden")}),function(site){return site.run()})).then(function(){that.toast.success("All matched sites have been scheduled to run.")})},Page.prototype.run=function(){var that=this,runningAirline=that.airlineCollection.at(that.runningAirlineIndex);that.listenToOnce(runningAirline.view,"completed",function(){that.runningAirlineIndex++,that.runAllStopRequested?(that.runAllStopRequested=!1,that.trigger("run-all-terminated")):that.runningAirlineIndex<that.airlineCollection.length?that.run():that.trigger("run-all-completed")}),runningAirline.view.run()},Page.prototype.openSiteDialog=function(model){var that=this,isNew=model.isNew(),view=new SiteEdit({model:model}),dlg=new Dialog({title:isNew?"New Site":"Edit: "+model.get("name"),body:view,buttons:[{id:"save",label:"Save",iconClass:"fa fa-save",buttonClass:"btn-primary",align:"left"},{id:"cancel",label:"Cancel",iconClass:"fa fa-times",buttonClass:"btn-default",align:"left",autoClose:!0}]});dlg.on("save",function(){B.resolve(model.save(view.val())).then(function(){isNew&&that.sites.add(model),that.toast.success("New site has been added."),dlg.close()})})},Page.prototype.onNewClick=function(event){event.preventDefault();var that=this,model=new Site({name:"New Site"});that.openSiteDialog(model)},Page.prototype.refresh=function(){var that=this;return that.airlineCollection.forEach(function(airline){airline.view&&airline.view.remove()}),that.fetch().then(function(){that.renderAirlines()})},Page.prototype.onAirlineCreated=function(){this.refresh(),this.toast.success("Airline has been created!")},Page.prototype.onAirlineSaved=function(){this.refresh(),this.toast.success("Airline has been saved!")},Page.prototype.onAirlineDeleted=function(airline){this.airlineCollection.remove(airline),this.refresh(),this.toast.success("Airline has been deleted!")},Page.prototype.onAirlineCloned=function(){this.refresh(),this.toast.success("Airline has been cloned!")},Page.prototype.fetch=function(){var that=this;return B.all([that.sites.fetch()])},Page})}();